# Top-up Service Configuration
# Copy to config.yaml and fill in your values.

# The deployed MultiAssetFPC contract address on Aztec L2
fpc_address: "0x27e0f62fe6edf34f850dd7c1cc7cd638f7ec38ed3eb5ae4bd8c0c941c78e67ac"

# Aztec node URL (for reading L2 Fee Juice balance)
aztec_node_url: "http://localhost:8080"

# ─── L1 configuration ─────────────────────────────────────────────────────────
l1_rpc_url: "http://localhost:8545"

# L1 chain id and Fee Juice portal/token addresses are discovered from
# nodeInfo on the connected Aztec node and validated against this RPC.

# TODO: In production, inject the private key from a secrets manager or HSM.
#       Prefer env var L1_OPERATOR_PRIVATE_KEY; avoid plaintext keys on disk.
# Optional when L1_OPERATOR_PRIVATE_KEY is set.
l1_operator_private_key: "0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80"

# ─── Top-up thresholds ────────────────────────────────────────────────────────
# Bridge when FPC Fee Juice balance drops below this (in wei / smallest unit)
# Example: 1e18 = 1 FeeJuice unit
threshold: "1000000000000000000"

# Amount to bridge each time the threshold is hit (in wei)
# Example: 10e18 = 10 FeeJuice units
top_up_amount: "10000000000000000000"

# Local JSON file used to persist in-flight bridge metadata so restarts can
# reconcile pending operations before new submissions. If reconciliation times
# out, this state is retained and retried on the next cycle.
bridge_state_path: ".topup-bridge-state.json"

# Ops HTTP server port (health/readiness/metrics).
ops_port: 3001

# How often to check the balance (milliseconds). 60000 = every minute.
check_interval_ms: 60000

# Confirmation polling settings after an L1 bridge is mined.
confirmation_timeout_ms: 180000
confirmation_poll_initial_ms: 1000
confirmation_poll_max_ms: 15000
