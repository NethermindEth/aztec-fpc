# Top-up Service Configuration
# Copy to config.yaml and fill in your values.

# Runtime profile controls secret-source enforcement:
# - development/test: plaintext config secrets are allowed
# - production: plaintext config secrets are rejected at startup
runtime_profile: "development"

# The deployed MultiAssetFPC contract address on Aztec L2
fpc_address: "0x27e0f62fe6edf34f850dd7c1cc7cd638f7ec38ed3eb5ae4bd8c0c941c78e67ac"

# Aztec node URL (for reading L2 Fee Juice balance)
aztec_node_url: "http://localhost:8080"

# ─── L1 configuration ─────────────────────────────────────────────────────────
l1_rpc_url: "http://localhost:8545"

# L1 chain id and Fee Juice portal/token addresses are discovered from
# nodeInfo on the connected Aztec node and validated against this RPC.

# TODO: In production, inject the private key from a secrets manager or HSM.
#       Prefer env var L1_OPERATOR_PRIVATE_KEY; avoid plaintext keys on disk.
# Secret provider modes:
# - auto: env first, then config fallback (config fallback forbidden in production)
# - env: require L1_OPERATOR_PRIVATE_KEY
# - config: require l1_operator_private_key (for local development only)
# - kms/hsm: require adapter wiring in code and l1_operator_secret_ref
l1_operator_secret_provider: "auto"
# l1_operator_secret_ref: "hsm://wallets/topup/l1-operator-key"
# Optional when L1_OPERATOR_PRIVATE_KEY is set.
l1_operator_private_key: "0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80"

# ─── Top-up thresholds ────────────────────────────────────────────────────────
# Bridge when FPC Fee Juice balance drops below this (in wei / smallest unit)
# Example: 1e18 = 1 FeeJuice unit
threshold: "1000000000000000000"

# Amount to bridge each time the threshold is hit (in wei)
# Example: 10e18 = 10 FeeJuice units
top_up_amount: "10000000000000000000"

# How often to check the balance (milliseconds). 60000 = every minute.
check_interval_ms: 60000

# Confirmation polling settings after an L1 bridge is mined.
confirmation_timeout_ms: 180000
confirmation_poll_initial_ms: 1000
confirmation_poll_max_ms: 15000
